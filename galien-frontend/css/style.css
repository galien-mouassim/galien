/* ============================================================
   GALIEN â€” Design System v2
   ============================================================ */
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,400&family=Lora:ital,wght@0,600;1,400&display=swap');

:root {
  --bg:#f8fafc;--surface:#ffffff;--surface-2:#f1f5f9;
  --border:#e2e8f0;--border-2:#cbd5e1;
  --accent:#0d9488;--accent-2:#0f766e;--accent-light:#ccfbf1;--accent-ghost:#f0fdfa;
  --red:#ef4444;--red-light:#fef2f2;--green:#22c55e;--green-light:#f0fdf4;
  --amber:#f59e0b;--amber-light:#fffbeb;--blue:#3b82f6;--blue-light:#eff6ff;
  --ink:#0f172a;--ink-2:#334155;--ink-3:#64748b;--ink-4:#94a3b8;
  --radius-sm:6px;--radius:12px;--radius-lg:20px;--radius-xl:28px;
  --shadow-sm:0 1px 3px rgba(15,23,42,.06),0 1px 2px rgba(15,23,42,.04);
  --shadow:0 4px 16px rgba(15,23,42,.08),0 1px 4px rgba(15,23,42,.04);
  --shadow-lg:0 12px 40px rgba(15,23,42,.12),0 4px 12px rgba(15,23,42,.06);
  --shadow-xl:0 24px 64px rgba(15,23,42,.16),0 8px 24px rgba(15,23,42,.08);
  --font:'Plus Jakarta Sans',system-ui,sans-serif;--font-serif:'Lora',Georgia,serif;
  --nav-h:60px;--sidebar-w:240px;--t:.18s cubic-bezier(.4,0,.2,1);
}

:root[data-theme="dark"] {
  --bg:#0b1220;--surface:#111827;--surface-2:#1f2937;
  --border:#334155;--border-2:#475569;
  --accent:#14b8a6;--accent-2:#0d9488;--accent-light:#134e4a;--accent-ghost:#0f2f2b;
  --red:#f87171;--red-light:#3a1c21;--green:#4ade80;--green-light:#123024;
  --amber:#fbbf24;--amber-light:#3b2c11;--blue:#60a5fa;--blue-light:#1d2c45;
  --ink:#e5e7eb;--ink-2:#cbd5e1;--ink-3:#94a3b8;--ink-4:#64748b;
}

:root[data-theme="dark"] .mode-card h4{color:var(--ink)}
:root[data-theme="dark"] .mode-card p{color:var(--ink-3)}
:root[data-theme="dark"] .dash-panel-title{color:var(--ink)}
:root[data-theme="dark"] .muted{color:var(--ink-3)}

:root[data-theme="dark"] .explanation{
  background:#13263f;
  border-left-color:#60a5fa;
  color:#dbeafe;
}

:root[data-theme="dark"] .rr-explanation{
  background:#13263f;
  border-left-color:#60a5fa;
  color:#dbeafe;
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:var(--font);font-size:15px;line-height:1.6;color:var(--ink);background:var(--bg);-webkit-font-smoothing:antialiased}
img{max-width:100%;display:block}
a{color:inherit;text-decoration:none}
button{cursor:pointer;font-family:inherit;border:none}
input,textarea,select{font-family:inherit}
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border-2);border-radius:99px}
::-webkit-scrollbar-thumb:hover{background:var(--ink-4)}

h1{font-size:clamp(1.75rem,4vw,2.6rem);font-weight:800;line-height:1.15;letter-spacing:-.04em}
h2{font-size:clamp(1.3rem,3vw,1.8rem);font-weight:700;letter-spacing:-.03em}
h3{font-size:1.05rem;font-weight:700;letter-spacing:-.02em}
h4{font-size:.9rem;font-weight:600}
p{color:var(--ink-2)}
.muted{color:var(--ink-3);font-size:.875rem}
.label{font-size:.72rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase;color:var(--ink-3)}
.container{max-width:1100px;margin:0 auto;padding:0 20px}

/* â”€â”€ Nav â”€â”€ */
.nav{display:flex;align-items:center;justify-content:space-between;height:var(--nav-h);padding:0 24px;background:var(--surface);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100}
.brand{font-size:1.25rem;font-weight:800;letter-spacing:-.05em;color:var(--accent);font-family:var(--font-serif)}
.nav-actions{display:flex;align-items:center;gap:10px}

/* â”€â”€ Buttons â”€â”€ */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 20px;background:var(--accent);color:#fff;border:none;border-radius:var(--radius);font-size:.9rem;font-weight:600;line-height:1;transition:var(--t);white-space:nowrap;cursor:pointer}
.btn:hover{background:var(--accent-2);transform:translateY(-1px);box-shadow:0 4px 16px rgba(13,148,136,.28)}
.btn:active{transform:none}
.btn.ghost,.btn.ghost:hover{background:transparent;color:var(--accent);border:1.5px solid var(--accent);box-shadow:none;transform:none}
.btn.ghost:hover{background:var(--accent-ghost)}
a.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;background:var(--accent);color:#fff;border:none;border-radius:var(--radius);font-size:.9rem;font-weight:600;transition:var(--t)}
a.btn:hover{background:var(--accent-2);transform:translateY(-1px);box-shadow:0 4px 16px rgba(13,148,136,.28)}
a.btn.ghost{background:transparent;color:var(--accent);border:1.5px solid var(--accent)}
a.btn.ghost:hover{background:var(--accent-ghost);transform:none;box-shadow:none}
.btn-inline{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;background:var(--surface-2);color:var(--ink-2);border:1px solid var(--border);border-radius:var(--radius-sm);font-size:.82rem;font-weight:600;transition:var(--t);cursor:pointer}
.btn-inline:hover{background:var(--border);color:var(--ink)}
.btn-ghost{background:transparent;color:var(--ink-3);border:1px solid var(--border);border-radius:var(--radius-sm);padding:8px 16px;font-size:.875rem;font-weight:500;transition:var(--t);cursor:pointer}
.btn-ghost:hover{background:var(--surface-2);color:var(--ink)}
.btn-danger{background:var(--red);color:#fff;border:none;border-radius:var(--radius);padding:10px 20px;font-size:.9rem;font-weight:600;transition:var(--t);cursor:pointer}
.btn-danger:hover{background:#dc2626}
.btn-sm{padding:6px 14px;font-size:.8rem}

/* â”€â”€ Forms â”€â”€ */
.field{display:flex;flex-direction:column;gap:6px;margin-bottom:14px}
.field span,.field > label{font-size:.82rem;font-weight:600;color:var(--ink-2);letter-spacing:.01em}
.field input,.field select,.field textarea,
input[type="text"],input[type="email"],input[type="password"],input[type="number"],select,textarea{width:100%;padding:10px 14px;background:var(--surface);border:1.5px solid var(--border);border-radius:var(--radius-sm);font-size:.9rem;color:var(--ink);transition:border-color var(--t),box-shadow var(--t);appearance:none}
.field input:focus,.field select:focus,.field textarea:focus,
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(13,148,136,.12)}
.field textarea,textarea{resize:vertical;min-height:80px}
select{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:36px}
.field select.multi-select{
  min-height: 96px;
  max-height: 124px;
  overflow-y: auto;
  background-image: none;
  padding-right: 12px;
}
.field select.multi-select option{
  padding: 4px 6px;
}
.form-msg{font-size:.875rem;color:var(--red);margin-top:8px;min-height:18px}

/* â”€â”€ Card â”€â”€ */
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:24px;box-shadow:var(--shadow-sm)}
.card.soft{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:24px}
.card-title{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px;padding-bottom:14px;border-bottom:1px solid var(--border)}

/* â”€â”€ Pills â”€â”€ */
.pill{display:inline-flex;align-items:center;padding:4px 12px;background:var(--accent-light);color:var(--accent-2);border-radius:99px;font-size:.75rem;font-weight:700;letter-spacing:.04em}
.badge{display:inline-flex;align-items:center;justify-content:center;min-width:18px;height:18px;padding:0 5px;background:var(--red);color:#fff;border-radius:99px;font-size:.7rem;font-weight:700}
.badge.hidden{display:none}
.tag{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;background:var(--surface-2);color:var(--ink-2);border:1px solid var(--border);border-radius:99px;font-size:.75rem;font-weight:500}

/* â”€â”€ Alert â”€â”€ */
.alert{padding:12px 16px;border-radius:var(--radius);font-size:.875rem;display:flex;align-items:center;gap:10px}
.alert.success{background:var(--green-light);color:#166534;border:1px solid #bbf7d0}
.alert.error{background:var(--red-light);color:#991b1b;border:1px solid #fca5a5}
.alert.info{background:var(--blue-light);color:#1e40af;border:1px solid #93c5fd}

/* â”€â”€ Modal â”€â”€ */
.modal{position:fixed;inset:0;background:rgba(15,23,42,.55);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:9000;display:flex;align-items:center;justify-content:center;padding:16px;animation:fadeIn .15s ease}
.modal.hidden{display:none}
.modal-content{background:var(--surface);border-radius:var(--radius-lg);padding:24px;width:100%;max-width:460px;box-shadow:var(--shadow-xl);animation:slideUp .2s cubic-bezier(.34,1.56,.64,1);max-height:90vh;overflow-y:auto}
.modal-content h3{margin-bottom:6px}
.modal-content .muted{margin-bottom:14px}
.modal-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:18px}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{opacity:0;transform:translateY(16px) scale(.97)}to{opacity:1;transform:none}}

/* â”€â”€ Toggle â”€â”€ */
.toggle-row{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 0;border-top:1px solid var(--border)}
.toggle-label{font-size:.875rem;color:var(--ink-2);font-weight:500;flex:1}
.toggle-label small{display:block;font-size:.75rem;color:var(--ink-3);font-weight:400;margin-top:1px}
.toggle-switch{position:relative;width:40px;height:22px;flex-shrink:0}
.toggle-switch input{opacity:0;width:0;height:0;position:absolute}
.toggle-slider{position:absolute;inset:0;background:var(--border-2);border-radius:99px;cursor:pointer;transition:var(--t)}
.toggle-slider::before{content:'';position:absolute;width:16px;height:16px;left:3px;top:3px;background:#fff;border-radius:50%;transition:var(--t);box-shadow:0 1px 3px rgba(0,0,0,.2)}
.toggle-switch input:checked + .toggle-slider{background:var(--accent)}
.toggle-switch input:checked + .toggle-slider::before{transform:translateX(18px)}

/* â”€â”€ Spinner â”€â”€ */
.spinner{width:30px;height:30px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-wrap{display:flex;align-items:center;justify-content:center;padding:48px 0}
.hidden{display:none!important}
.link{color:var(--accent);font-weight:600;font-size:.9rem}

.theme-toggle{
  position:fixed;
  left:14px;
  bottom:14px;
  width:40px;
  height:40px;
  border-radius:999px;
  background:var(--surface);
  color:var(--ink);
  border:1px solid var(--border);
  box-shadow:var(--shadow);
  z-index:2200;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
}

.theme-toggle:hover{
  background:var(--surface-2);
}
.link:hover{text-decoration:underline}
.help-text{font-size:.78rem;color:var(--ink-3);padding:8px 12px;background:var(--surface-2);border-radius:var(--radius-sm);border-left:3px solid var(--accent);line-height:1.5;margin-top:4px}
.duplicate-alert{padding:10px 12px;background:var(--amber-light);border:1px solid var(--amber);border-radius:var(--radius);font-size:.8rem;color:#92400e;margin-top:8px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.container.home{padding-top:0}
.home .nav{position:fixed;top:0;left:0;right:0}
.hero{display:grid;grid-template-columns:1fr 1fr;gap:48px;align-items:center;min-height:calc(100vh - var(--nav-h));padding:calc(var(--nav-h) + 48px) 24px 60px;max-width:1100px;margin:0 auto}
.hero-text{display:flex;flex-direction:column;gap:18px}
.hero-text .pill{align-self:flex-start;margin-bottom:4px}
.hero-text p{font-size:1rem;max-width:44ch;line-height:1.75}
.hero-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
.hero-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-xl);padding:28px;box-shadow:var(--shadow-lg)}
.hero-card-title{font-size:.72rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:var(--accent);margin-bottom:14px}
.feature-list{list-style:none;display:flex;flex-direction:column;gap:12px}
.feature-list li{display:flex;align-items:flex-start;gap:12px;color:var(--ink-2);font-size:.92rem;line-height:1.5}
.feature-list li::before{content:'';flex-shrink:0;width:20px;height:20px;margin-top:2px;background:var(--accent-light);border-radius:50%;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%230d9488' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 6L9 17l-5-5'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:center}
.feature-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;padding:48px 24px 72px;max-width:1100px;margin:0 auto}
.feature-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:20px;transition:box-shadow var(--t)}
.feature-card:hover{box-shadow:var(--shadow)}
.feature-card h3{margin-bottom:8px}
.feature-card p{font-size:.88rem}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUTH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.container.auth{min-height:100vh;display:grid;grid-template-columns:1fr 1fr;max-width:none;padding:0}
.auth-hero{background:linear-gradient(145deg,#0f172a 0%,#134e4a 100%);padding:60px 48px;display:flex;flex-direction:column;justify-content:center;gap:20px;position:relative;overflow:hidden}
.auth-hero::before{content:'';position:absolute;top:-100px;right:-100px;width:400px;height:400px;background:radial-gradient(circle,rgba(13,148,136,.3) 0%,transparent 70%);pointer-events:none}
.auth-hero .pill{align-self:flex-start;background:rgba(204,251,241,.15);color:#ccfbf1}
.auth-hero h1{color:#fff}
.auth-hero p{color:rgba(255,255,255,.7);font-size:.95rem;max-width:36ch}
.auth-card{display:flex;flex-direction:column;justify-content:center;padding:60px 48px;max-width:460px;margin:auto;width:100%}
.auth-card h2{margin-bottom:4px}
.auth-card .muted{margin-bottom:24px}
.auth-card .btn{width:100%;margin-top:8px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DASHBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.dashboard-wrap{min-height:100vh;display:flex;flex-direction:column}
.dash-topbar{height:var(--nav-h);display:flex;align-items:center;justify-content:space-between;padding:0 24px;background:var(--surface);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:50}
.dash-brand{font-size:1.2rem;font-weight:800;letter-spacing:-.05em;color:var(--accent);font-family:var(--font-serif)}
.dashboard-main{flex:1;display:flex;align-items:flex-start;justify-content:center;padding:28px 16px 60px}
.dashboard-card{width:100%;max-width:580px}
.dashboard-card > h2{margin-bottom:4px}
.dashboard-card > .muted{margin-bottom:22px}

.mode-cards{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:22px}
.mode-card{display:flex;flex-direction:column;align-items:flex-start;gap:8px;padding:16px;background:var(--surface);border:2px solid var(--border);border-radius:var(--radius-lg);cursor:pointer;transition:var(--t);text-align:left}
.mode-card:hover{border-color:var(--accent);background:var(--accent-ghost)}
.mode-card.selected{border-color:var(--accent);background:var(--accent-ghost);box-shadow:0 0 0 3px rgba(13,148,136,.12)}
.mode-card-icon{width:36px;height:36px;border-radius:9px;background:var(--accent-light);display:flex;align-items:center;justify-content:center;font-size:1.1rem;color:var(--accent)}
.mode-card h4{font-size:.88rem}
.mode-card p{font-size:.76rem;color:var(--ink-3);line-height:1.4}

.dash-panel{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);padding:18px;margin-bottom:14px}
.dash-panel-title{font-size:.72rem;font-weight:700;letter-spacing:.07em;text-transform:uppercase;color:var(--ink-3);margin-bottom:12px;display:flex;align-items:center;gap:8px}
.filters-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.filters-row.three{grid-template-columns:1fr 1fr 1fr}

.principal-filter-panel{padding:14px 16px}
.principal-filter-head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:12px}
.filter-mode-switch{display:flex;align-items:center;gap:6px}
.mode-pill{
  border:1px solid var(--border);background:var(--surface-2);color:var(--ink-3);
  border-radius:999px;padding:5px 10px;font-size:.72rem;font-weight:700;cursor:pointer;transition:var(--t)
}
.mode-pill.active{background:var(--accent-light);border-color:var(--accent);color:var(--accent-2)}
.builder-step{margin-bottom:10px}
.builder-label{font-size:.72rem;font-weight:700;color:var(--ink-3);margin-bottom:7px;text-transform:uppercase;letter-spacing:.04em}
.principal-class-cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px;margin-bottom:10px}
.principal-class-card{
  border:1.5px solid var(--border);border-radius:12px;background:var(--surface-2);padding:10px 10px;cursor:pointer;
  transition:var(--t);text-align:left
}
.principal-class-card:hover{border-color:var(--border-2);transform:translateY(-1px)}
.principal-class-card.active{border-color:var(--accent);background:var(--accent-ghost);box-shadow:0 0 0 2px rgba(13,148,136,.12)}
.principal-class-title{font-size:.8rem;font-weight:800;color:var(--ink);line-height:1.2}
.principal-class-sub{font-size:.68rem;color:var(--ink-3);margin-top:3px}
.principal-module-chips{display:flex;flex-wrap:wrap;gap:7px}
.principal-module-chip{
  display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1.5px solid var(--border);
  background:var(--surface);font-size:.75rem;color:var(--ink-3);cursor:pointer;transition:var(--t)
}
.principal-module-chip:hover{border-color:var(--accent);color:var(--accent)}
.principal-module-chip.active{border-color:var(--accent);background:var(--accent-ghost);color:var(--accent-2);font-weight:700}
.principal-course-chips,.principal-favtag-chips{display:flex;flex-wrap:wrap;gap:7px}
.principal-course-chip,.principal-favtag-chip{
  display:inline-flex;align-items:center;gap:6px;padding:6px 11px;border-radius:999px;border:1.5px solid var(--border);
  background:var(--surface);font-size:.76rem;color:var(--ink-3);cursor:pointer;transition:var(--t)
}
.principal-course-chip:hover{border-color:var(--accent);color:var(--accent)}
.principal-course-chip.active{border-color:var(--accent);background:var(--accent-ghost);color:var(--accent-2);font-weight:700}
.principal-source-pills{display:grid;grid-template-columns:1fr 1fr;gap:7px}
.principal-source-pill{
  display:flex;align-items:center;gap:8px;padding:7px 11px;border-radius:10px;border:1.5px solid var(--border);
  background:var(--surface);font-size:.76rem;color:var(--ink-3);cursor:pointer;transition:var(--t)
}
.principal-source-pill:hover{border-color:#93c5fd;background:#eff6ff;color:#1d4ed8}
[data-theme="dark"] .principal-source-pill:hover{background:#1e3a5f;color:#93c5fd}
.principal-source-pill.active{border-color:#3b82f6;background:#eff6ff;color:#1d4ed8;font-weight:700}
[data-theme="dark"] .principal-source-pill.active{background:#1e3a5f;color:#93c5fd}
.principal-favtag-chip:hover{border-color:var(--rose);color:var(--rose)}
.principal-favtag-chip.active{border-color:var(--rose);background:var(--rose-light);color:var(--rose-2);font-weight:700}
.principal-empty{font-size:.72rem;color:var(--ink-4)}
.principal-count-wrap{margin-top:10px;border:1px solid var(--border);border-radius:12px}

/* ══════════════════════════════════════════════
   FILTER PANEL — redesigned
══════════════════════════════════════════════ */
.filter-panel { padding:0; overflow:visible; position:relative; }

.filter-panel-header {
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 18px 12px; border-bottom:1px solid var(--border);
}
.filter-panel .dash-panel-title { margin-bottom:0; }

.filter-reset-btn {
  display:inline-flex; align-items:center; gap:5px;
  padding:4px 10px; border:1px solid var(--border); border-radius:99px;
  background:transparent; color:var(--ink-3); font-size:.72rem;
  font-weight:600; font-family:inherit; cursor:pointer;
  transition:var(--t); letter-spacing:.02em;
}
.filter-reset-btn:hover { background:var(--red-light); border-color:var(--red); color:var(--red); }

.filter-grid { display:grid; grid-template-columns:1fr 1fr; }
.filter-grid-top { border-bottom:1px solid var(--border); }
.filter-grid-bottom { }
.filter-item {
  padding:14px 16px; border-right:1px solid var(--border);
  display:flex; flex-direction:column; gap:10px; position:relative;
}
.filter-item:last-child { border-right:none; }

.filter-item-header { display:flex; align-items:center; justify-content:space-between; gap:8px; }
.filter-item-label {
  display:flex; align-items:center; gap:7px;
  font-size:.72rem; font-weight:700; color:var(--ink-2);
  letter-spacing:.04em; text-transform:uppercase;
}
.filter-icon {
  width:24px; height:24px; border-radius:6px;
  background:var(--accent-light); color:var(--accent);
  display:flex; align-items:center; justify-content:center;
  font-size:.78rem; flex-shrink:0;
}
.filter-badge {
  font-size:.65rem; font-weight:700; padding:2px 8px;
  border-radius:99px; background:var(--surface-2);
  color:var(--ink-3); border:1px solid var(--border);
  transition:var(--t); white-space:nowrap;
}
.filter-badge.active { background:var(--accent-light); color:var(--accent-2); border-color:var(--accent); }

/* ── Trigger button ── */
.ms-trigger {
  width:100%; display:flex; align-items:center; justify-content:space-between;
  gap:8px; padding:8px 12px;
  background:var(--surface); border:1.5px solid var(--border);
  border-radius:var(--radius-sm); cursor:pointer; font-family:inherit;
  font-size:.82rem; color:var(--ink-2); font-weight:500;
  transition:border-color var(--t),box-shadow var(--t),background var(--t);
  text-align:left; min-width:0; overflow:hidden;
}
.ms-trigger:hover { border-color:var(--border-2); background:var(--surface-2); }
.ms-trigger.open { border-color:var(--accent); box-shadow:0 0 0 3px rgba(13,148,136,.12); background:var(--surface); }
.ms-trigger-text { flex:1; min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; display:flex; align-items:center; }
.ms-trigger-text.placeholder { color:var(--ink-4); }
.ms-chevron { color:var(--ink-4); font-size:.7rem; flex-shrink:0; transition:transform var(--t); }
.ms-trigger.open .ms-chevron { transform:rotate(180deg); }

.ms-tags { display:flex; flex-wrap:nowrap; gap:4px; flex:1; min-width:0; overflow:hidden; align-items:center; }
.ms-tag {
  display:inline-flex; align-items:center; padding:2px 8px;
  background:var(--accent-light); color:var(--accent-2);
  border-radius:99px; font-size:.7rem; font-weight:700;
  white-space:nowrap; max-width:132px; overflow:hidden; text-overflow:ellipsis; flex-shrink:1; min-width:0;
}
.ms-tag-more {
  display:inline-flex; align-items:center; padding:2px 8px;
  background:var(--surface-2); color:var(--ink-3);
  border-radius:99px; font-size:.7rem; font-weight:700;
  white-space:nowrap; flex-shrink:0; border:1px solid var(--border);
}

/* ── Dropdown ── */
.ms-dropdown {
  position:absolute; top:calc(100% + 6px); left:0; right:0;
  background:var(--surface); border:1.5px solid var(--border);
  border-radius:var(--radius); box-shadow:var(--shadow-lg);
  z-index:500; overflow:hidden;
  animation:msDropIn .15s cubic-bezier(.34,1.3,.64,1);
  min-width:190px;
}
@keyframes msDropIn {
  from { opacity:0; transform:translateY(-6px) scale(.98); }
  to   { opacity:1; transform:none; }
}
.ms-dropdown.hidden { display:none; }

.ms-search-wrap {
  padding:8px 10px 6px; border-bottom:1px solid var(--border);
  display:flex; align-items:center; gap:7px; background:var(--surface-2);
}
.ms-search-wrap i { color:var(--ink-4); font-size:.8rem; flex-shrink:0; }
.ms-search {
  flex:1; border:none; background:transparent; outline:none;
  font-family:inherit; font-size:.82rem; color:var(--ink); padding:0;
}
.ms-search::placeholder { color:var(--ink-4); }

.ms-select-all {
  display:flex; align-items:center; gap:9px;
  padding:8px 12px; cursor:pointer;
  border-bottom:1px solid var(--border);
  font-size:.78rem; font-weight:700; color:var(--ink-3);
  transition:background var(--t); user-select:none;
}
.ms-select-all:hover { background:var(--surface-2); }

.ms-options { max-height:180px; overflow-y:auto; padding:4px; }
.ms-options::-webkit-scrollbar { width:4px; }
.ms-options::-webkit-scrollbar-thumb { background:var(--border-2); border-radius:99px; }

.ms-option {
  display:flex; align-items:center; gap:9px;
  padding:7px 10px; border-radius:var(--radius-sm);
  cursor:pointer; transition:background var(--t);
  font-size:.83rem; color:var(--ink-2); user-select:none;
}
.ms-option:hover { background:var(--surface-2); }
.ms-option.selected { color:var(--ink); font-weight:600; }
.ms-option.hidden-opt { display:none; }

/* Checkboxes */
.ms-checkbox {
  width:16px; height:16px; border-radius:4px;
  border:1.5px solid var(--border-2); background:var(--surface);
  display:flex; align-items:center; justify-content:center;
  flex-shrink:0; transition:var(--t); position:relative;
}
.ms-option.selected .ms-checkbox {
  background:var(--accent); border-color:var(--accent);
  box-shadow:0 0 0 2px rgba(13,148,136,.18);
}
.ms-option.selected .ms-checkbox::after {
  content:''; position:absolute;
  width:9px; height:5px;
  border-left:2px solid #fff; border-bottom:2px solid #fff;
  transform:rotate(-45deg) translate(1px,-1px);
}
.ms-all-checkbox {
  width:16px; height:16px; border-radius:4px;
  border:1.5px solid var(--border-2); background:var(--surface);
  display:flex; align-items:center; justify-content:center;
  flex-shrink:0; transition:var(--t); position:relative;
}
.ms-all-checkbox.all { background:var(--accent); border-color:var(--accent); }
.ms-all-checkbox.all::after {
  content:''; position:absolute; width:9px; height:5px;
  border-left:2px solid #fff; border-bottom:2px solid #fff;
  transform:rotate(-45deg) translate(1px,-1px);
}
.ms-all-checkbox.partial { background:var(--accent-light); border-color:var(--accent); }
.ms-all-checkbox.partial::before {
  content:''; width:8px; height:2px; background:var(--accent); border-radius:1px;
}
.ms-empty { padding:14px; text-align:center; color:var(--ink-4); font-size:.78rem; }

/* ── Question counter ── */
.filters-count-wrap {
  padding:14px 18px; border-top:1px solid var(--border);
  display:flex; align-items:center; justify-content:center;
  background:var(--surface-2);
}
.question-counter { display:flex; align-items:baseline; gap:8px; }
.question-counter-num {
  font-size:1.6rem; font-weight:800; color:var(--accent);
  letter-spacing:-.04em; line-height:1; font-variant-numeric:tabular-nums;
}
.question-counter-label {
  font-size:.75rem; font-weight:600; color:var(--ink-3);
  text-transform:uppercase; letter-spacing:.07em;
}

/* ── Favtag rose accent ── */
:root {
  --rose:#f43f5e; --rose-2:#e11d48;
  --rose-light:#fff1f2; --rose-ghost:#fff5f7;
  --rose-border:#fecdd3;
}
:root[data-theme="dark"] {
  --rose:#fb7185; --rose-2:#f43f5e;
  --rose-light:#3b0e18; --rose-ghost:#2d0a13;
  --rose-border:#9f1239;
}

.filter-item--fav {
  background: linear-gradient(160deg, var(--rose-ghost) 0%, var(--surface) 100%);
}
.filter-icon--fav {
  background: var(--rose-light);
  color: var(--rose);
}
.filter-badge--fav.active {
  background: var(--rose-light);
  color: var(--rose-2);
  border-color: var(--rose);
}

.ms-trigger--fav:hover {
  border-color: var(--rose-border);
  background: var(--rose-ghost);
}
.ms-trigger--fav.open {
  border-color: var(--rose);
  box-shadow: 0 0 0 3px rgba(244,63,94,.12);
}

/* Fav tag options: use rose checkboxes */
#opts_favtag .ms-option.selected .ms-checkbox {
  background: var(--rose);
  border-color: var(--rose);
  box-shadow: 0 0 0 2px rgba(244,63,94,.18);
}
#all_favtag .ms-all-checkbox.all {
  background: var(--rose); border-color: var(--rose);
}
#all_favtag .ms-all-checkbox.partial {
  background: var(--rose-light); border-color: var(--rose);
}
#all_favtag .ms-all-checkbox.partial::before {
  background: var(--rose);
}
/* Fav tags in trigger show rose color */
.ms-trigger--fav .ms-tag {
  background: var(--rose-light);
  color: var(--rose-2);
}

/* Responsive */
@media (max-width:520px) {
  .filter-grid { grid-template-columns:1fr; }
  .filter-item { border-right:none; border-bottom:1px solid var(--border); }
  .filter-grid-top .filter-item:last-child { border-bottom:1px solid var(--border); }
  .filter-grid-bottom .filter-item:last-child { border-bottom:none; }
  .filter-item--fav { background: linear-gradient(160deg, var(--rose-ghost) 0%, var(--surface) 60%); }
}

/* Dark mode */
:root[data-theme="dark"] .filter-item--fav { background: linear-gradient(160deg, var(--rose-ghost) 0%, var(--surface) 100%); }
:root[data-theme="dark"] .filters-count-wrap { background:rgba(255,255,255,.03); }
.exam-extras{display:flex;flex-direction:column}
.delay-row{display:flex;gap:8px;align-items:flex-end}
.delay-row .field{flex:1;margin-bottom:0}
.delay-input-wrap{display:flex;flex-direction:column;gap:6px}
.delay-input-wrap span{font-size:.82rem;font-weight:600;color:var(--ink-2)}
.delay-input-wrap input{width:90px}
.qcount-slider-wrap{display:flex;flex-direction:column;gap:8px}
.qcount-slider-wrap input[type="range"]{
  width:100%;
  appearance:none;
  -webkit-appearance:none;
  height:6px;
  border-radius:999px;
  background:linear-gradient(90deg,var(--accent) 0%,var(--accent) var(--pct,0%),var(--border) var(--pct,0%),var(--border) 100%);
  outline:none;
  transition:background .2s ease;
}
.qcount-slider-wrap input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none;
  appearance:none;
  width:18px;height:18px;border-radius:50%;
  background:var(--accent);
  border:2px solid #fff;
  box-shadow:0 2px 8px rgba(13,148,136,.35);
}
.qcount-slider-wrap input[type="range"]::-moz-range-thumb{
  width:18px;height:18px;border-radius:50%;
  background:var(--accent);
  border:2px solid #fff;
  box-shadow:0 2px 8px rgba(13,148,136,.35);
}
.qcount-slider-meta{display:flex;justify-content:space-between;align-items:center;font-size:.8rem}
.qcount-slider-meta strong{font-size:.9rem;color:var(--ink)}
.start-btn{width:100%;padding:13px;font-size:.95rem;font-weight:700;border-radius:var(--radius-lg)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QCM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.qcm-layout{min-height:100vh;display:flex;flex-direction:column}
.qcm-topbar{position:sticky;top:0;z-index:50;background:var(--surface);border-bottom:1px solid var(--border);padding:0 20px;height:50px;display:flex;align-items:center;justify-content:space-between;gap:12px}
.qcm-topbar-left{display:flex;align-items:center;gap:12px;flex:1;min-width:0}
.qcm-progress-wrap{flex:1;min-width:0;display:flex;flex-direction:column;gap:3px}
.qcm-progress-text{font-size:.74rem;font-weight:600;color:var(--ink-3)}
.progress-bar-track{height:4px;background:var(--border);border-radius:99px;overflow:hidden}
.progress-bar-fill{height:100%;background:var(--accent);border-radius:99px;transition:width .3s ease}
.qcm-timer{display:flex;align-items:center;gap:5px;font-size:.8rem;font-weight:600;color:var(--ink-2);background:var(--surface-2);padding:4px 11px;border-radius:99px;white-space:nowrap;flex-shrink:0}
.qcm-timer.urgent{color:var(--red);background:var(--red-light);animation:pulse 1s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}
.qcm-body{flex:1;display:flex;gap:18px;max-width:1140px;width:100%;margin:0 auto;padding:22px 18px}
.qcm-main{flex:1;min-width:0;display:flex;flex-direction:column;gap:14px}
.qcm-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-xl);padding:26px;box-shadow:var(--shadow-sm)}
.tag-row{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:12px}
.course-tag{display:inline-flex;align-items:center;padding:3px 9px;background:var(--surface-2);color:var(--ink-3);border:1px solid var(--border);border-radius:99px;font-size:.71rem;font-weight:500}
.question-text{font-size:1.04rem;font-weight:500;line-height:1.7;color:var(--ink);margin-bottom:18px}
#options{display:flex;flex-direction:column;gap:8px}
.option{display:flex;align-items:flex-start;gap:12px;padding:12px 15px;background:var(--surface-2);border:1.5px solid var(--border);border-radius:var(--radius);cursor:pointer;transition:var(--t);position:relative;user-select:none}
.option:hover:not(.correct):not(.wrong):not(:has(input:disabled)){border-color:var(--accent);background:var(--accent-ghost)}
.option input[type="checkbox"]{appearance:none;-webkit-appearance:none;width:18px;height:18px;min-width:18px;border:2px solid var(--border-2);border-radius:5px;background:var(--surface);cursor:pointer;margin-top:2px;transition:var(--t);position:relative;flex-shrink:0}
.option input[type="checkbox"]:checked{background:var(--accent);border-color:var(--accent)}
.option input[type="checkbox"]:checked::after{content:'';position:absolute;left:3px;top:0;width:8px;height:5px;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg)}
.opt-letter{font-weight:700;font-size:.79rem;color:var(--ink-3);min-width:18px;padding-top:2px}
.opt-text{font-size:.92rem;color:var(--ink);line-height:1.5;flex:1}
.option.correct{background:var(--green-light);border-color:var(--green)}
.option.correct .opt-letter,.option.correct .opt-text{color:#166534}
.option.wrong{background:var(--red-light);border-color:var(--red)}
.option.wrong .opt-letter,.option.wrong .opt-text{color:#991b1b}
.option input[type="checkbox"]:disabled{cursor:not-allowed}
.explanation{margin-top:14px;padding:13px 15px;background:var(--blue-light);border-left:4px solid var(--blue);border-radius:0 var(--radius) var(--radius) 0;font-size:.87rem;color:#1e40af;line-height:1.65;display:none}
.explanation.visible{display:block}
.question-note-inline{margin-top:12px;padding:12px 15px;background:var(--amber-light);border:1px solid #fde68a;border-radius:var(--radius);font-size:.84rem;color:#92400e}
.question-note-inline.hidden{display:none}
.question-note-inline-head{display:flex;align-items:center;gap:8px;font-weight:600;margin-bottom:5px}

.q-actions{display:flex;align-items:center;gap:6px;margin-top:16px;padding-top:13px;border-top:1px solid var(--border)}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:var(--radius-sm);background:var(--surface-2);border:1px solid var(--border);color:var(--ink-3);font-size:1rem;transition:var(--t);cursor:pointer}
.icon-btn:hover{background:var(--border);color:var(--ink)}
.icon-btn .icon-fill{display:none}
.icon-btn.active{background:var(--accent-light);border-color:var(--accent);color:var(--accent)}
.icon-btn.active .icon-fill{display:block}
.icon-btn.active .icon-outline{display:none}
.icon-btn.warn.active{background:var(--red-light);border-color:var(--red);color:var(--red)}

.qcm-nav{display:flex;align-items:center;gap:10px;margin-top:16px}
.btn-prev{display:inline-flex;align-items:center;gap:6px;padding:10px 16px;background:var(--surface-2);color:var(--ink-2);border:1.5px solid var(--border);border-radius:var(--radius);font-size:.87rem;font-weight:600;transition:var(--t);cursor:pointer;white-space:nowrap}
.btn-prev:hover:not(:disabled){background:var(--border)}
.btn-prev:disabled{opacity:.4;cursor:not-allowed}
.btn-next{flex:1;display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 18px;background:var(--accent);color:#fff;border:none;border-radius:var(--radius);font-size:.92rem;font-weight:700;transition:var(--t);cursor:pointer}
.btn-next:hover:not(:disabled){background:var(--accent-2)}
.btn-next:disabled{opacity:.5;cursor:not-allowed}

/* Comments */
.qcm-sidebar{width:330px;flex-shrink:0}
.comment-panel{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-xl);padding:16px;box-shadow:var(--shadow-sm);position:sticky;top:70px;max-height:calc(100vh - 96px);display:flex;flex-direction:column}
.comment-panel.hidden{display:none}
.comment-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;padding-bottom:10px;border-bottom:1px solid var(--border)}
.comment-header h3{font-size:.9rem}
.comment-list{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:9px;min-height:50px;max-height:260px}
.comment-item{padding:10px;background:var(--surface-2);border-radius:var(--radius)}
.comment-row{display:flex;gap:9px}
.comment-avatar{width:28px;height:28px;min-width:28px;border-radius:50%;background:var(--accent-light);color:var(--accent);font-size:.7rem;font-weight:700;display:flex;align-items:center;justify-content:center;overflow:hidden}
.comment-avatar img{width:100%;height:100%;object-fit:cover}
.comment-content{flex:1;min-width:0}
.comment-meta{display:flex;align-items:center;gap:7px;flex-wrap:wrap;margin-bottom:3px}
.comment-author{font-size:.77rem;font-weight:700}
.comment-date{font-size:.7rem}
.comment-body{font-size:.82rem;color:var(--ink-2);line-height:1.5;word-break:break-word}
.comment-actions{display:flex;gap:6px;margin-top:6px}
.comment-action{display:inline-flex;align-items:center;gap:4px;padding:3px 7px;border-radius:99px;background:transparent;border:1px solid var(--border);font-size:.71rem;color:var(--ink-3);transition:var(--t);cursor:pointer}
.comment-action:hover{background:var(--surface-2)}
.comment-action.active.like{background:var(--red-light);border-color:var(--red);color:var(--red)}
.comment-action.active.dislike{background:var(--blue-light);border-color:var(--blue);color:var(--blue)}
.comment-menu{position:relative;margin-left:auto}
.comment-menu-btn{width:22px;height:22px;border-radius:4px;background:transparent;border:none;color:var(--ink-3);font-size:.8rem;display:flex;align-items:center;justify-content:center;cursor:pointer}
.comment-menu-btn:hover{background:var(--border)}
.comment-menu-list{position:absolute;right:0;top:100%;margin-top:4px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-sm);box-shadow:var(--shadow);z-index:100;min-width:130px;overflow:hidden}
.comment-menu-list.hidden{display:none}
.comment-menu-item{display:flex;align-items:center;gap:8px;width:100%;padding:8px 14px;background:transparent;border:none;font-size:.8rem;color:var(--ink-2);text-align:left;transition:var(--t);cursor:pointer}
.comment-menu-item:hover{background:var(--surface-2)}
.comment-menu-item.delete{color:var(--red)}
.comment-menu-item.delete:hover{background:var(--red-light)}
.comment-form{margin-top:11px;padding-top:10px;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:7px}
.comment-form textarea{min-height:52px;font-size:.84rem;resize:none;padding:8px 12px}
.comment-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:7px;padding:18px;text-align:center;color:var(--ink-3);font-size:.84rem}
.comment-empty i{font-size:1.4rem}
.comment-skeleton{display:flex;flex-direction:column;gap:5px;padding:10px}
.skeleton-line{height:11px;background:linear-gradient(90deg,var(--border) 25%,var(--surface-2) 50%,var(--border) 75%);background-size:200% 100%;border-radius:4px;animation:shimmer 1.5s infinite}
.skeleton-line:last-child{width:60%}
@keyframes shimmer{0%{background-position:200% 0}100%{background-position:-200% 0}}
.note-meta-row{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-top:8px;flex-wrap:wrap}
.note-inline-toggle{display:flex!important;align-items:center!important;flex-direction:row!important;gap:8px;font-size:.79rem;color:var(--ink-3);cursor:pointer}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESULT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.result-wrap{min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:28px 16px 56px}
.result-content{width:100%;max-width:620px;display:flex;flex-direction:column;gap:20px}
.result-card{width:100%;text-align:center}
.result-score-circle{width:142px;height:142px;margin:0 auto 22px;position:relative}
.result-score-circle svg{width:100%;height:100%;transform:rotate(-90deg)}
.circle-bg{fill:none;stroke:var(--border);stroke-width:10}
.circle-fill{fill:none;stroke-width:10;stroke-linecap:round;stroke-dasharray:440;transition:stroke-dashoffset 1s ease}
.result-score-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.result-score-pct{font-size:1.85rem;font-weight:800;letter-spacing:-.05em;color:var(--ink)}
.result-score-label{font-size:.71rem;color:var(--ink-3);font-weight:600}
.result-meta{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:18px 0}
.result-meta-item{background:var(--surface-2);border:1px solid var(--border);border-radius:var(--radius);padding:13px 10px;text-align:center}
.result-meta-item .val{font-size:1.05rem;font-weight:700;color:var(--ink)}
.result-meta-item .lbl{font-size:.71rem;color:var(--ink-3);margin-top:2px}
.result-actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin-top:18px}

/* Question review */
.result-review{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden}
.result-review-header{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.result-review-header h3{font-size:.92rem}
.rr-list{display:flex;flex-direction:column}
.rr-row{display:grid;grid-template-columns:36px 1fr auto auto;gap:10px;align-items:center;padding:11px 14px;border-bottom:1px solid var(--border);cursor:pointer;transition:background var(--t)}
.rr-row:last-child{border-bottom:none}
.rr-row:hover{background:var(--surface-2)}
.rr-num{font-size:.73rem;font-weight:700;color:var(--ink-3);text-align:center}
.rr-answers{display:flex;flex-direction:column;gap:3px}
.rr-answer-line{font-size:.77rem;display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.rr-label{font-size:.67rem;font-weight:700;text-transform:uppercase;letter-spacing:.04em;color:var(--ink-4);min-width:50px}
.rr-letters{display:flex;gap:4px;flex-wrap:wrap}
.rr-letter{display:inline-flex;align-items:center;justify-content:center;width:21px;height:21px;border-radius:5px;font-size:.7rem;font-weight:700;background:var(--surface-2);border:1px solid var(--border);color:var(--ink-2)}
.rr-letter.correct{background:var(--green-light);border-color:var(--green);color:#166534}
.rr-letter.wrong{background:var(--red-light);border-color:var(--red);color:#991b1b}
.rr-letter.missed{background:var(--amber-light);border-color:var(--amber);color:#92400e}
.rr-score{font-size:.76rem;font-weight:700;padding:3px 9px;border-radius:99px;white-space:nowrap}
.rr-score.full{background:var(--green-light);color:#166534}
.rr-score.partial{background:var(--amber-light);color:#92400e}
.rr-score.zero{background:var(--red-light);color:#991b1b}
.rr-chevron{color:var(--ink-4);font-size:.82rem;transition:transform var(--t);flex-shrink:0}
.rr-row.open .rr-chevron{transform:rotate(90deg)}
.rr-detail{display:none;padding:12px 14px;border-bottom:1px solid var(--border);background:var(--surface-2)}
.rr-detail.open{display:block}
.rr-question-text{font-size:.87rem;font-weight:500;color:var(--ink);line-height:1.65;margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid var(--border)}
.rr-options{display:flex;flex-direction:column;gap:5px;margin-bottom:10px}
.rr-option{display:flex;align-items:flex-start;gap:9px;padding:7px 11px;border-radius:var(--radius-sm);background:var(--surface);border:1px solid var(--border);font-size:.82rem;color:var(--ink-2)}
.rr-option.correct{background:var(--green-light);border-color:var(--green);color:#166534}
.rr-option.wrong{background:var(--red-light);border-color:var(--red);color:#991b1b}
.rr-option.missed{background:var(--amber-light);border-color:var(--amber);color:#92400e}
.rr-option-letter{font-weight:700;font-size:.74rem;min-width:18px}
.rr-explanation{padding:9px 13px;background:var(--blue-light);border-left:4px solid var(--blue);border-radius:0 var(--radius-sm) var(--radius-sm) 0;font-size:.82rem;color:#1e40af;line-height:1.6;margin-top:6px}
.rr-unanswered{font-size:.77rem;color:var(--ink-3);font-style:italic;padding:4px 0}
.rr-no-data{display:flex;flex-direction:column;align-items:center;padding:32px;text-align:center;color:var(--ink-3);font-size:.875rem;gap:8px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROFILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.profile-app{display:flex;min-height:100vh;max-width:none;padding:0}
.profile-sidebar{width:var(--sidebar-w);min-height:100vh;background:var(--surface);border-right:1px solid var(--border);padding:18px 12px;display:flex;flex-direction:column;gap:3px;position:sticky;top:0;flex-shrink:0;max-height:100vh;overflow-y:auto}
.sidebar-back{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:var(--radius-sm);background:var(--surface-2);border:1px solid var(--border);color:var(--ink-2);margin-bottom:12px;transition:var(--t)}
.sidebar-back:hover{background:var(--border)}
.sidebar-back svg{width:16px;height:16px;fill:currentColor}
.profile-sidebar-top{display:flex;flex-direction:column;align-items:center;gap:9px;padding:12px 0 16px;margin-bottom:6px;border-bottom:1px solid var(--border)}
.sidebar-avatar{width:64px;height:64px;border-radius:50%;object-fit:cover;border:3px solid var(--border)}
.sidebar-name{font-size:.82rem;font-weight:700;text-align:center;color:var(--ink)}
.profile-tab{display:flex;align-items:center;gap:9px;padding:9px 11px;border-radius:var(--radius-sm);background:transparent;border:none;font-size:.82rem;font-weight:500;color:var(--ink-3);text-align:left;transition:var(--t);position:relative;width:100%;cursor:pointer}
.profile-tab:hover{background:var(--surface-2);color:var(--ink)}
.profile-tab.active{background:var(--accent-ghost);color:var(--accent);font-weight:600}
.profile-tab .tab-icon{font-size:.92rem;width:17px;text-align:center}
.tab-messages{justify-content:space-between}
.profile-tab-logout{margin-top:auto;color:var(--red);padding-top:9px;border-top:1px solid var(--border)}
.profile-tab-logout:hover{background:var(--red-light);color:var(--red)}
.profile-sections{flex:1;padding:28px;overflow-y:auto;min-width:0}
.profile-section{display:none}
.profile-section.active{display:flex;flex-direction:column;gap:18px}
.profile-section.hidden{display:none}
.avatar-stack{display:flex;align-items:center;gap:16px;padding:16px 0;border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin:12px 0}
.avatar{border-radius:50%;object-fit:cover;border:3px solid var(--border)}
.avatar.xl{width:76px;height:76px}
.avatar-actions.vertical{display:flex;flex-direction:column;gap:7px}
.file-btn{display:inline-flex;align-items:center;gap:6px;padding:7px 14px;background:var(--surface-2);border:1px solid var(--border);border-radius:var(--radius-sm);font-size:.8rem;font-weight:600;color:var(--ink-2);cursor:pointer;transition:var(--t)}
.file-btn:hover{background:var(--border)}
.file-btn input[type="file"]{display:none}
.info-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:13px;background:var(--surface-2);border-radius:var(--radius);margin-bottom:12px}
.info-grid p{margin:0;font-size:.84rem}
.stat-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.stat-item{background:var(--surface-2);border:1px solid var(--border);border-radius:var(--radius);padding:16px 13px;text-align:center}
.stat-val{font-size:1.45rem;font-weight:800;color:var(--ink)}
.stat-lbl{font-size:.71rem;color:var(--ink-3);margin-top:4px}
.analytics-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
.analytics-pill{background:var(--surface-2);border:1px solid var(--border);border-radius:var(--radius);padding:12px}
.analytics-pill .k{font-size:.7rem;color:var(--ink-3);text-transform:uppercase;letter-spacing:.04em}
.analytics-pill .v{font-size:1.05rem;font-weight:700;color:var(--ink);margin-top:4px}
.analytics-block{margin-top:12px;background:var(--surface-2);border:1px solid var(--border);border-radius:var(--radius);padding:12px}
.analytics-block h4{font-size:.86rem;margin:0 0 10px}
.score-list{display:flex;flex-wrap:wrap;gap:8px}
.score-chip{
  padding:10px 14px;
  border:1px solid var(--border);
  background:var(--surface);
  border-radius:14px;
  font-size:.78rem;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:3px;
  min-width:210px;
  transition:var(--t);
}
.score-chip:hover{border-color:var(--accent);transform:translateY(-1px)}
.score-chip strong{color:var(--ink);font-size:1.02rem;line-height:1.2}
.score-chip small{color:var(--ink-2);font-weight:600}
.score-chip.active{
  border-color:var(--accent);
  background:linear-gradient(145deg, var(--accent-ghost) 0%, var(--surface) 100%);
  box-shadow:0 6px 16px rgba(13,148,136,.12);
}
.score-chip.active small{color:var(--ink)}
.mini-table{display:flex;flex-direction:column;gap:7px}
.mini-row{display:grid;grid-template-columns:1fr auto auto;gap:10px;padding:8px 10px;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--surface);font-size:.8rem}
.mini-row .muted{font-size:.72rem}
.mini-row .pct{font-weight:700}
.mini-row .pct.good{color:var(--green)}
.mini-row .pct.bad{color:var(--red)}
.timeline-note{font-size:.81rem;color:var(--ink-2);line-height:1.5}
.timeline-list{margin-top:8px;display:flex;flex-direction:column;gap:5px}
.timeline-day{display:flex;justify-content:space-between;font-size:.77rem;color:var(--ink-2)}
.result-header,.result-row{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:10px;padding:9px 13px;font-size:.82rem}
.result-header{font-size:.71rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--ink-3);border-bottom:2px solid var(--border);margin-bottom:4px}
.result-row{border-radius:var(--radius-sm);transition:var(--t);cursor:pointer}
.result-row:hover{background:var(--surface-2)}
.message-list{display:flex;flex-direction:column;gap:9px}
.message-item{padding:12px 14px;background:var(--surface-2);border:1px solid var(--border);border-radius:var(--radius);transition:var(--t)}
.message-item.unread{background:var(--blue-light);border-color:#93c5fd}
.message-meta{display:flex;justify-content:space-between;gap:8px;font-size:.77rem;color:var(--ink-3);margin-bottom:5px}
.message-item.unread .message-meta{color:#1d4ed8;font-weight:600}
.message-body{font-size:.87rem;color:var(--ink-2);line-height:1.5}
.favorites-toolbar{display:flex;gap:8px;margin-bottom:13px;flex-wrap:wrap;align-items:center}
.favorites-toolbar select,.favorites-toolbar input{max-width:170px;padding:7px 12px;font-size:.82rem}
.favorites-toolbar select{padding-right:32px}
.favorite-item{padding:13px 15px;background:var(--surface-2);border:1px solid var(--border);border-radius:var(--radius);display:flex;flex-direction:column;gap:7px;margin-bottom:8px;transition:var(--t)}
.favorite-item:hover{border-color:var(--accent)}
.favorite-title{font-size:.87rem;color:var(--ink);line-height:1.5;font-weight:500}
.favorite-tags{display:flex;flex-wrap:wrap;gap:5px}
.favorite-actions{display:flex;gap:7px;flex-wrap:wrap}
/* Flags / Signals */
.flag-item{padding:13px 15px;border-radius:var(--radius);display:flex;flex-direction:column;gap:7px;margin-bottom:8px;background:var(--red-light);border:1px solid #fca5a5}
.flag-item.resolved{background:var(--surface-2);border-color:var(--border)}
.flag-question{font-size:.87rem;color:var(--ink);font-weight:500}
.flag-reason{font-size:.81rem;color:var(--ink-2);padding:7px 11px;background:rgba(255,255,255,.65);border-radius:var(--radius-sm);border-left:3px solid var(--border)}
.flag-meta{font-size:.74rem;color:var(--ink-3);display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.flag-status{display:inline-flex;align-items:center;gap:4px;font-size:.71rem;font-weight:700;padding:2px 8px;border-radius:99px;letter-spacing:.02em}
.flag-status.pending{background:var(--amber-light);color:#92400e}
.flag-status.resolved{background:var(--green-light);color:#166534}
.flag-actions{display:flex;gap:7px;flex-wrap:wrap}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ADMIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.admin-layout{display:flex;min-height:100vh}
.admin-sidebar{width:var(--sidebar-w);min-height:100vh;background:#0f172a;padding:18px 10px;display:flex;flex-direction:column;gap:2px;position:sticky;top:0;max-height:100vh;overflow-y:auto;flex-shrink:0}
.admin-brand{padding:9px 13px 18px;border-bottom:1px solid rgba(255,255,255,.08);margin-bottom:6px}
.admin-brand .brand{color:#5eead4;font-size:1.1rem}
.admin-brand .muted{color:rgba(255,255,255,.4);font-size:.7rem;margin-top:2px}
.admin-tab{display:flex;align-items:center;gap:9px;padding:9px 13px;border-radius:var(--radius-sm);background:transparent;border:none;font-size:.82rem;font-weight:500;color:rgba(255,255,255,.5);text-align:left;cursor:pointer;transition:var(--t);width:100%}
.admin-tab:hover{background:rgba(255,255,255,.06);color:rgba(255,255,255,.85)}
.admin-tab.active{background:rgba(13,148,136,.2);color:#5eead4;font-weight:600}
.admin-tab i{font-size:.92rem;width:17px;text-align:center}
.admin-sep{height:1px;background:rgba(255,255,255,.08);margin:5px 0}
.admin-content{flex:1;padding:28px;overflow-y:auto;min-width:0;background:var(--bg)}
.admin-section{display:none}
.admin-section.active{display:block}
.admin-header{display:flex;align-items:center;justify-content:space-between;gap:14px;margin-bottom:22px;flex-wrap:wrap}
.admin-header h2{font-size:1.35rem}
.admin-toolbar{display:flex;align-items:center;gap:8px;margin-bottom:12px;flex-wrap:wrap}
.admin-toolbar input[type="text"],.admin-toolbar select{max-width:190px;font-size:.82rem;padding:7px 30px 7px 10px;width:auto}
.admin-table-wrap{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);overflow:hidden;box-shadow:var(--shadow-sm)}
.admin-table{width:100%;border-collapse:collapse;font-size:.84rem}
.admin-table th{background:var(--surface-2);padding:9px 13px;text-align:left;font-size:.71rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--ink-3);border-bottom:1px solid var(--border)}
.admin-table td{padding:9px 13px;border-bottom:1px solid var(--border);vertical-align:top}
.admin-table tr:last-child td{border-bottom:none}
.admin-table tr:hover td{background:var(--surface-2)}
.admin-table .q-text{max-width:280px;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;font-size:.82rem}
.admin-table .actions{display:flex;gap:5px;flex-wrap:wrap}
.sub-tabs{display:flex;gap:2px;padding:3px;background:var(--surface-2);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:16px;width:fit-content}
.tab-btn{padding:7px 16px;border-radius:var(--radius-sm);background:transparent;border:none;font-size:.83rem;font-weight:500;color:var(--ink-3);transition:var(--t);cursor:pointer}
.tab-btn.active{background:var(--surface);color:var(--ink);font-weight:600;box-shadow:var(--shadow-sm)}
.tab-btn:hover:not(.active){color:var(--ink)}
.import-zone{border:2px dashed var(--border);border-radius:var(--radius-lg);padding:32px;text-align:center;background:var(--surface-2);transition:var(--t);cursor:pointer}
.import-zone:hover,.import-zone.drag-over{border-color:var(--accent);background:var(--accent-ghost)}
.import-preview{overflow-x:auto;margin-top:12px;border-radius:var(--radius);border:1px solid var(--border)}
.admin-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:13px;margin-bottom:20px}
.admin-stat-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:16px;display:flex;flex-direction:column;gap:4px}
.admin-stat-card .stat-val{font-size:1.35rem;font-weight:800}
.admin-stat-card .stat-lbl{font-size:.74rem;color:var(--ink-3)}
/* Reports */
.report-item{padding:14px;border-radius:var(--radius);margin-bottom:9px;background:var(--amber-light);border:1px solid #fde68a;transition:var(--t)}
.report-item.resolved{background:var(--surface-2);border-color:var(--border);opacity:.75}
.report-meta{font-size:.74rem;color:var(--ink-3);margin-bottom:5px;display:flex;align-items:center;gap:9px;flex-wrap:wrap}
.report-question{font-size:.87rem;font-weight:600;margin-bottom:4px}
.report-reason{font-size:.87rem;color:var(--ink-2);margin-bottom:9px;padding:7px 11px;background:rgba(255,255,255,.5);border-radius:var(--radius-sm)}
.report-actions{display:flex;gap:7px;flex-wrap:wrap;align-items:center}
.import-preview table{width:100%;border-collapse:collapse;font-size:.77rem}
.import-preview th{background:var(--surface-2);padding:7px 9px;text-align:left;font-size:.69rem;font-weight:700;text-transform:uppercase;letter-spacing:.05em;color:var(--ink-3);border-bottom:1px solid var(--border);white-space:nowrap}
.import-preview td{padding:6px 9px;border-bottom:1px solid var(--border);color:var(--ink-2);max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.import-preview tr:last-child td{border-bottom:none}

/* Profile floating menu */
.profile-menu{position:fixed;bottom:20px;right:20px;z-index:200}
.profile-trigger{width:42px;height:42px;border-radius:50%;border:2px solid var(--border);background:var(--surface);box-shadow:var(--shadow);overflow:hidden;position:relative;transition:var(--t);display:flex;align-items:center;justify-content:center;cursor:pointer}
.profile-trigger:hover{box-shadow:var(--shadow-lg);transform:scale(1.05)}
.profile-link-img{width:100%;height:100%;object-fit:cover}
.profile-badge{position:absolute;top:-2px;right:-2px;min-width:15px;height:15px;background:var(--red);color:#fff;border-radius:99px;font-size:.6rem;font-weight:700;display:flex;align-items:center;justify-content:center;padding:0 3px;border:2px solid var(--surface)}
.profile-badge.hidden{display:none}
.profile-menu-list{position:absolute;bottom:calc(100% + 10px);right:0;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow-lg);overflow:hidden;min-width:160px;animation:slideUp .15s ease}
.profile-menu-list.hidden{display:none}
.profile-menu-item{display:flex;align-items:center;gap:9px;padding:9px 14px;font-size:.87rem;color:var(--ink-2);background:transparent;border:none;width:100%;text-align:left;cursor:pointer;transition:var(--t)}
.profile-menu-item:hover{background:var(--surface-2);color:var(--ink)}
.profile-menu-item.logout{color:var(--red)}
.profile-menu-item.logout:hover{background:var(--red-light)}

/* â•â•â• RESPONSIVE â€” Tablet â•â•â• */
@media(max-width:900px){
  .hero{grid-template-columns:1fr;padding-top:calc(var(--nav-h) + 32px);min-height:auto;gap:28px}
  .hero-card{display:none}
  .feature-grid{grid-template-columns:1fr 1fr}
  .container.auth{grid-template-columns:1fr}
  .auth-hero{padding:48px 32px;min-height:auto}
  .auth-card{padding:40px 32px}
  .profile-sidebar{width:200px;padding:14px 8px}
  .profile-sections{padding:20px}
  .stat-grid{grid-template-columns:1fr 1fr}
  .analytics-grid{grid-template-columns:1fr 1fr}
  .result-header,.result-row{grid-template-columns:2fr 1fr 1fr}
  .result-header>*:nth-child(4),.result-row>*:nth-child(4){display:none}
  .qcm-sidebar{display:none}
  .qcm-body{padding:16px}
  .qcm-card{padding:20px}
  .admin-content{padding:20px}
  .filters-row.three{grid-template-columns:1fr 1fr}
  .principal-class-cards{grid-template-columns:1fr 1fr}
  .principal-source-pills{grid-template-columns:1fr}
}

/* â•â•â• RESPONSIVE â€” Mobile â•â•â• */
@media(max-width:640px){
  :root{--nav-h:52px}
  .nav{padding:0 14px}
  .hero{padding:calc(var(--nav-h) + 22px) 14px 36px}
  .hero-actions{flex-direction:column}
  .hero-actions .btn,.hero-actions a.btn{width:100%;justify-content:center}
  .feature-grid{grid-template-columns:1fr;padding:28px 14px 44px}
  .container.auth{grid-template-columns:1fr}
  .auth-hero{padding:36px 18px 24px;justify-content:flex-end}
  .auth-hero p{display:none}
  .auth-card{padding:22px 18px}
  .dashboard-main{padding:16px 12px 40px}
  .mode-cards{grid-template-columns:1fr}
  .filters-row{grid-template-columns:1fr}
  .filters-row.three{grid-template-columns:1fr}
  .dash-panel{padding:14px}
  .principal-filter-head{flex-direction:column;align-items:stretch}
  .principal-class-cards{grid-template-columns:1fr}
  .filter-mode-switch{width:100%}
  .mode-pill{flex:1;text-align:center}
  .delay-row{flex-direction:column;align-items:stretch}
  .delay-input-wrap input{width:100%}
  .qcm-topbar{padding:0 12px;height:46px}
  .qcm-body{padding:10px}
  .qcm-card{padding:14px;border-radius:var(--radius-lg)}
  .question-text{font-size:.97rem}
  .btn-prev .prev-text{display:none}
  .result-wrap{padding:14px 10px 40px;align-items:flex-start}
  .result-meta{grid-template-columns:1fr 1fr}
  .result-meta-item:last-child{grid-column:1 / -1}
  .rr-row{grid-template-columns:30px 1fr auto}
  .rr-chevron{display:none}
  .profile-app{flex-direction:column}
  .profile-sidebar{width:100%;min-height:auto;position:sticky;top:0;z-index:50;max-height:none;flex-direction:row;flex-wrap:nowrap;padding:7px;gap:3px;border-right:none;border-bottom:1px solid var(--border);overflow-x:auto;align-items:center}
  .profile-sidebar-top{display:none}
  .sidebar-back{margin-bottom:0;flex-shrink:0}
  .profile-tab{padding:6px 10px;white-space:nowrap;font-size:.77rem;width:auto;flex-shrink:0}
  .profile-tab-logout{margin-top:0;padding-top:6px;border-top:none;border-left:1px solid var(--border);padding-left:10px;margin-left:auto}
  .profile-sections{padding:13px}
  .stat-grid{grid-template-columns:1fr 1fr}
  .analytics-grid{grid-template-columns:1fr}
  .info-grid{grid-template-columns:1fr}
  .result-header,.result-row{grid-template-columns:1fr 1fr;font-size:.77rem;padding:8px 10px;gap:7px}
  .result-header>*:nth-child(n+3),.result-row>*:nth-child(n+3){display:none}
  .avatar-stack{flex-direction:column;align-items:flex-start;gap:12px}
  .admin-layout{flex-direction:column}
  .admin-sidebar{width:100%;min-height:auto;flex-direction:row;flex-wrap:nowrap;overflow-x:auto;padding:7px;gap:3px;position:sticky;top:0;z-index:100;max-height:none}
  .admin-brand,.admin-sep{display:none}
  .admin-tab{white-space:nowrap;padding:7px 10px;font-size:.77rem;flex-shrink:0;width:auto}
  .admin-content{padding:13px}
  .admin-header{flex-direction:column;align-items:flex-start;gap:8px}
  .admin-header h2{font-size:1.15rem}
  .admin-table{font-size:.77rem}
  .admin-table th,.admin-table td{padding:7px 9px}
  .admin-stats{grid-template-columns:1fr 1fr}
  .comment-panel{position:fixed;bottom:0;left:0;right:0;max-height:72vh;border-radius:var(--radius-lg) var(--radius-lg) 0 0;border:none;border-top:1px solid var(--border);z-index:500;box-shadow:var(--shadow-xl)}
}
@media(max-width:380px){
  .mode-card{padding:12px}
  .qcm-card{padding:12px}
  .result-score-circle{width:115px;height:115px}
  .admin-stats{grid-template-columns:1fr}
}

/* QCM old-look override (scoped) */
.qcm-wrap .qcm-card{
  background: var(--card);
  width: min(560px, 92vw);
  padding: 28px;
  border-radius: 20px;
  border: 1px solid var(--line);
  box-shadow: 0 16px 40px rgba(15, 23, 18, 0.12);
}

.qcm-wrap #question{line-height:1.4;margin-bottom:20px}

.qcm-wrap .tag-row{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}
.qcm-wrap .course-tag{
  font-size:12px;
  font-weight:600;
  letter-spacing:.3px;
  text-transform:uppercase;
  color:var(--accent-2);
  background:#e8f5f4;
  border-radius:999px;
  padding:6px 10px;
}

.qcm-wrap .option{
  display:flex;
  align-items:center;
  padding:12px;
  margin-bottom:12px;
  background:var(--soft);
  border:1px solid transparent;
  border-radius:12px;
  transition:all .2s ease;
}
.qcm-wrap .option:hover{background:#eef2ef;border-color:#dde3df;transform:translateY(-1px)}
.qcm-wrap .option input{margin-right:12px;transform:scale(1.2)}

.qcm-wrap .explanation{
  margin-top:16px;
  padding:12px;
  background:#f3fbfb;
  border-left:4px solid var(--accent);
  border-radius:8px;
}

.qcm-wrap .q-nav{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:14px}
.qcm-wrap .q-nav button{margin-top:0}

.qcm-wrap .comment-panel{
  background:var(--card);
  width:min(560px, 92vw);
  margin:16px auto 0;
  padding:20px;
  border-radius:16px;
  border:1px solid rgba(18, 24, 28, 0.08);
  box-shadow:0 14px 30px rgba(15, 23, 18, 0.1);
}

@media (max-width: 560px){
  .qcm-wrap .qcm-card,
  .qcm-wrap .comment-panel{width:min(720px,96vw);padding:16px}
  .qcm-wrap .q-nav{grid-template-columns:1fr}
}

:root[data-theme="dark"] .profile-menu-list {
  background: #0f172a;
  border-color: #334155;
}

.auth-card button,
.profile-section button:not(.btn-inline):not(.profile-tab):not(.profile-tab-logout),
.dashboard-card > button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 20px;
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: var(--radius);
  font-size: .9rem;
  font-weight: 600;
  line-height: 1;
  transition: var(--t);
}

.auth-card button:hover,
.profile-section button:not(.btn-inline):not(.profile-tab):not(.profile-tab-logout):hover,
.dashboard-card > button:hover {
  background: var(--accent-2);
}

.favorite-title-btn {
  width: 100%;
  margin: 0;
  padding: 0;
  border: none;
  background: transparent;
  color: var(--ink);
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
}

.favorite-preview {
  margin-top: 6px;
  padding: 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--surface);
}

.favorite-preview-q {
  font-size: .84rem;
  color: var(--ink-2);
}

.result-save-box {
  margin: 10px 0 14px;
  padding: 10px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: var(--surface-2);
}

.rr-history-actions {
  margin-top: 10px;
}

.rr-attempt-history {
  margin-top: 8px;
  display: grid;
  gap: 6px;
}

.attempt-row {
  display: grid;
  grid-template-columns: 1fr 1fr auto;
  gap: 10px;
  padding: 7px 10px;
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: .8rem;
  color: var(--ink-2);
  background: var(--surface);
}

.favorite-detail-grid {
  margin-top: 8px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 6px 12px;
  font-size: .82rem;
  color: var(--ink-2);
}

.favorite-detail-block {
  margin-top: 10px;
  padding: 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--surface);
  font-size: .82rem;
}

.favorite-opt {
  padding: 4px 0;
  border-bottom: 1px dashed var(--border);
}

.favorite-opt:last-child {
  border-bottom: none;
}

.favorite-comment {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border);
}

.favorite-comment:first-of-type {
  border-top: none;
  padding-top: 0;
  margin-top: 0;
}

.dash-panel-title {
  display: flex;
  align-items: center;
  gap: 8px;
}

.dash-panel-title #questionsCount {
  margin-left: auto;
}

.filters-count-wrap {
  display: flex;
  justify-content: center;
  margin-top: 12px;
}

.brand-with-icon {
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

.brand-icon {
  width: 24px;
  height: 24px;
  padding: 5px;
  border-radius: 12px;
  background:
    radial-gradient(circle at 20% 20%, rgba(255,255,255,.9), rgba(255,255,255,.1) 55%),
    linear-gradient(145deg, #d7f3ee, #c2ebe4);
  box-shadow:
    0 6px 14px rgba(15,118,110,.16),
    inset 0 1px 0 rgba(255,255,255,.7);
  object-fit: contain;
  display: block;
}

.auth-brand {
  color: #ffffff;
  font-weight: 700;
  opacity: 0.95;
  font-size: 1.06rem;
  margin-bottom: 8px;
  padding: 10px 14px;
  border-radius: 16px;
  border: 1px solid rgba(204, 251, 241, 0.24);
  background: linear-gradient(135deg, rgba(20,184,166,.22), rgba(13,148,136,.12));
  box-shadow: 0 12px 28px rgba(8, 47, 73, 0.22);
  width: fit-content;
}

.auth-brand .brand-icon {
  width: 46px;
  height: 46px;
  padding: 10px;
  border-radius: 14px;
  background:
    radial-gradient(circle at 25% 20%, rgba(255,255,255,.98), rgba(255,255,255,.72) 58%, rgba(236,253,245,.55)),
    linear-gradient(150deg, #ecfeff, #ccfbf1);
  box-shadow:
    0 10px 20px rgba(6,95,70,.25),
    inset 0 1px 0 rgba(255,255,255,.85);
}

.profile-brand-mini {
  margin-bottom: 10px;
  color: #2d3c38;
  font-size: 0.85rem;
  font-weight: 700;
  padding: 6px 10px;
  border-radius: 12px;
  background: rgba(255,255,255,.62);
  border: 1px solid #d7e8e2;
}

.dash-brand.brand-with-icon .brand-icon,
.nav .brand-with-icon .brand-icon,
.admin-header .brand-with-icon .brand-icon {
  width: 28px;
  height: 28px;
  padding: 6px;
}

.dash-brand.brand-with-icon span,
.nav .brand-with-icon span,
.admin-header .brand-with-icon span {
  letter-spacing: -0.02em;
}

/* Logo reset: cleaner/minimal integration */
.brand-with-icon {
  gap: 8px;
}

.brand-icon {
  width: 24px;
  height: 24px;
  padding: 0;
  border-radius: 0;
  background: transparent;
  box-shadow: none;
}

.auth-brand {
  padding: 0;
  border: 0;
  background: transparent;
  box-shadow: none;
  margin-bottom: 10px;
}

.auth-brand .brand-icon {
  width: 52px;
  height: 52px;
  padding: 0;
  border-radius: 0;
  background: transparent;
  box-shadow: none;
}

.profile-brand-mini {
  padding: 0;
  border: 0;
  background: transparent;
}

/* Login artistic centered logo block */
.auth-hero {
  align-items: center;
  text-align: center;
}

.auth-logo-block {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  margin-bottom: 6px;
}

.auth-logo-mark {
  width: clamp(92px, 11vw, 144px);
  height: clamp(92px, 11vw, 144px);
  object-fit: contain;
}

.auth-logo-word {
  font-family: var(--font-serif);
  font-weight: 800;
  font-size: clamp(3rem, 6vw, 5.5rem);
  line-height: 0.95;
  letter-spacing: -0.03em;
  color: #ffffff;
  text-transform: lowercase;
}

.auth-hero .pill {
  align-self: center;
}

.auth-hero p {
  max-width: 40ch;
}

@media (max-width: 768px) {
  .auth-logo-mark {
    width: clamp(74px, 26vw, 104px);
    height: clamp(74px, 26vw, 104px);
  }

  .auth-logo-word {
    font-size: clamp(2.4rem, 11vw, 3.8rem);
  }
}

/* ══════════════════════════════════════════════════
   RANGE SLIDER — override original qcount rules
══════════════════════════════════════════════════ */

/* Wrap layout */
.qcount-slider-wrap {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Label + big value row */
.slider-header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 8px;
}
.slider-header > span {
  font-size: .82rem;
  font-weight: 600;
  color: var(--ink-3);
}
.slider-count {
  display: flex;
  align-items: baseline;
  gap: 4px;
}
.slider-count strong {
  font-size: 1.4rem;
  font-weight: 800;
  color: var(--ink);
  letter-spacing: -.04em;
  line-height: 1;
}
.slider-count strong span {
  font-size: .6rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .05em;
  color: var(--ink-4);
  margin-left: 4px;
  vertical-align: middle;
}

/* ── Track: override the original 6px solid-thumb rule ── */
.qcount-slider-wrap input[type="range"] {
  appearance: none;
  -webkit-appearance: none;
  width: 100%;
  height: 18px;
  background: transparent !important;
  border: 0;
  outline: none;
}

/* ── Thumb: hollow circle instead of solid teal ── */
.qcount-slider-wrap input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background: var(--surface);          /* hollow — shows the page bg */
  border: 2px solid var(--accent);
  box-shadow: 0 0 0 3px rgba(13,148,136,.15);
  transition: transform .15s ease, box-shadow .15s ease;
  margin-top: -7px;
}
.qcount-slider-wrap input[type="range"]:hover::-webkit-slider-thumb {
  transform: scale(1.18);
  box-shadow: 0 0 0 5px rgba(13,148,136,.18);
}
.qcount-slider-wrap input[type="range"]:active::-webkit-slider-thumb {
  transform: scale(1.28);
  box-shadow: 0 0 0 7px rgba(13,148,136,.2);
}
.qcount-slider-wrap input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  background: var(--surface);
  border: 2px solid var(--accent);
  box-shadow: 0 0 0 3px rgba(13,148,136,.15);
  transition: transform .15s ease;
}

:root[data-theme="dark"] .qcount-slider-wrap input[type="range"] {
  background: transparent !important;
}

.qcount-slider-wrap input[type="range"]::-webkit-slider-runnable-track {
  height: 4px;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    var(--accent) 0%,
    var(--accent) var(--pct, 0%),
    color-mix(in srgb, var(--ink-4) 40%, transparent) var(--pct, 0%),
    color-mix(in srgb, var(--ink-4) 40%, transparent) 100%
  );
}

.qcount-slider-wrap input[type="range"]::-moz-range-track {
  height: 4px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--ink-4) 40%, transparent);
}

.qcount-slider-wrap input[type="range"]::-moz-range-progress {
  height: 4px;
  border-radius: 999px;
  background: var(--accent);
}

:root[data-theme="dark"] .qcount-slider-wrap input[type="range"]::-webkit-slider-runnable-track {
  background: linear-gradient(
    90deg,
    #16c7bb 0%,
    #16c7bb var(--pct, 0%),
    #334155 var(--pct, 0%),
    #334155 100%
  );
}

/* Min/max end labels */
.slider-ends {
  display: flex;
  justify-content: space-between;
  font-size: .68rem;
  color: var(--ink-4);
  font-weight: 500;
  margin-top: -4px;
}

/* Top bar logo-only consistency */
.topbar-logo {
  display: inline-flex;
  align-items: center;
}
.topbar-logo .brand-icon {
  width: 40px !important;
  height: 40px !important;
}
